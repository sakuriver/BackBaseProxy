# 勤怠システムについて
## 要件定義

### システムの目的

#### 現在は、事務所ごとの勤怠カードを押しているが
　　　　リモートワークを進めるにあたってハイブリットなシステムを導入したい。
    
　　　・旧システムで利用されているKingOfTimeを利用しているところに対して、
        宅内でのPCから連携できるようにしたい。

        チャットで完結できるようにしたい。
        各プロジェクト毎のチャットへ作業開始投稿をする
### アプリケーション側
#### 社員個別ログイン用のバックエンド連携
　　社員ごとの報告書カレンダー情報取得API
　　　　リクエスト情報
          検索年月
        レスポンス情報
          作業一覧 作業データの配列 
    出勤API(KingOfTimeの出勤APIを実行する)
    　　出勤登録年月日
    退勤API(KingOfTimeの退勤APIを実行する)
    　　退勤情報更新年月日
    日報登録API
        日報データ
            タスクid...........タスク種類一覧から選択
            技術カテゴリーId
            作業中プロジェクトId
            作業時間
            作業年月日.........現在年月日またはカレンダーUIから選択

    日報編集API
    お知らせ情報取得API(勤怠システムそのもののお知らせなど)
      リクエスト
      　  年月日
      レスポンス
          お知らせ情報一覧 お知らせ情報の配列
    カレンダー詳細情報API
      リクエスト
      レスポンス
           日報データ単位の一覧情報
    ログアウトAPI
    　　セッション情報を削除する
####   社員向け画面一覧
　　ログイン画面
　　　　メールアドレスとパスワードを入力後に、ログインボタンを押す
　　　　想定バリデーション
　　　　　メールアドレスの存在確認
　　　　　メールアドレスと該当のパスワードによる完全一致
　　　　　ログイン完了が完了した場合は、トップ画面へリダイレクトする
　　トップ画面
        現在カレンダー情報　年月情報を指定
　　ログアウト処理
　　　　 現在のセッション情報を終了して、ログインページへリダイレクトする
　　勤怠報告ダイアログボックス
　　　　　プロジェクトId
         技術カテゴリーId
　　　　　タスクId
#### 管理者向けシステム
##### 画面一覧
　　　　 プロジェクト一覧画面
            検索オプション
　　　　 社員一覧画面
　　　　　　社員新規登録機能
            苗字...........苗字登録文字列確認
            名前...........名前登録文字列確認
　　　　　　フリガナ.........フリガナのカタカナ確認
            ジョブid
            　　　ジョブマスターに登録されている数値がリクエストで送信されているかの確認
            パスワード(ハッシュ情報で暗号化と復号化)
　　　　　　メールアドレス...メールアドレス形式のバリデーションチェック
            所属事務所Id...
            在職中フラグ....チェックボックスを表示
　　　
　　　　　　社員更新フォーム
　　　　　　　　在職更新切り替え
　　　　　　　　名前については、申請をしてもらって管理者側で更新想定
　　　　　　社員部署及びスキルでの一覧集計
         プロジェクト毎集計画面
　　　　 タスク一覧画面
　　　　　 タスク新規登録画面
           タスクCSV一括投入
           タスク更新画面
　　　　　 タスク検索API
         技術カテゴリー一覧画面         
           技術カテゴリーid
           名称
           ジャンルカテゴリー(プログラミング、デザイン、企画・販売、管理等など)
           作成日時
           更新日時
         ジョブ一覧画面
         　ジョブデータ投入CSV
         事務所一覧画面
         　事務所データ投入CSV
         　事務所情報
         　　id
             事務所名
         　　事務所住所
             予算(事務所なオリジナル及び研究工数があれば)
             作成日時
             更新日時
##### HeadLessCMS用API
         プロジェクト検索API
           検索オプション
              条件パラメータ
                プロジェクトidを指定
　　　　　     並び替え
　　　
##### CSV解析及び各種社員手続き向けデータダウンロード
         出勤時間集計結果
　　　　 プロジェクト毎の工数及び予算概算出力  
       個別機能
　　　　 月単位のアラート機能
　　　　　　社員個別の月単位の作業時間を集計して、定数の既定ラインを超えている場合は、赤いダイアログボックスを表示する。　

##### 集計バッチ
###### プロジェクト総予算工数集計機能

##### データ構造
          プロジェクト情報
　　　　　日報データ
            1日単位の報告一覧
            [ {
               id
                タスクid
                技術カテゴリーId
                作業中プロジェクトId
                作業時間
                作業年月日
　　　　　    　報告文 
             }]
 
          社員情報
            id
            苗字
            名前
　　　　　　フリガナ
            ジョブid
            パスワード(ハッシュ情報で暗号化と復号化)
　　　　　　メールアドレス
            所属事務所Id
            在職中フラグ
　　　　　　社員登録日時
　　　　　　社員更新日時

##### キャッシュ関連
　　　　　　ログイン中情報
              ユーザid...ログインを実行して、１時間程度を想定
                         ログアウト時にキャッシュコードからキーを削除
　　　　　　カレンダー月単位の報告書一覧
              idのlist情報を所有
              select * 
              from 作業報告書
              where id in (カレンダーの月単位id)


