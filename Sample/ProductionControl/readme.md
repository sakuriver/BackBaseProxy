# ドキュメントの立ち位置

# 生産管理するシステム全体で使うデータ構造

## 見積書

お客さんから、依頼されて作成する資料データ。
作成が完了した後はステータスが更新される。

想定されるステータス

| No | タイトル | 説明 |
|:-----------|:------------|:------------|
| 1       | 作成中        | 見積書を作成している途中         |
| 2     | 上司確認中     |  見積の作成が完了して、上司が確認をしている      |
| 3       | 顧客返事待ち | 作成した見積もりについて、お客様が相見積もりの内容を確認している |
| 4       | 成約完了 | 見積の結果、生産管理にのせる許可が出た状態。次の書類の段階へ進む |
| 5       | 未成約 | 見積の結果、他のプロジェクト扱いになったもの、見積一覧からは非表示となる |

## 注文書

お客様から、見積もりや過去ベースで合意が取れている継続プロジェクトについて
定期的に届く資料。
注文書が届いた後は、確定した日程後に生産管理のライン表へ表示する。


| No | タイトル | 説明 |
|:-----------|:------------|:------------|
| 1       | 担当者確認待ち        | お客様から、届いてレコードが初期作成された状態         |
| 2     | 入力中     |  注文書の内容を生産計画表に対して、反映作業をしている状態、社内の担当者が設定されている。      |
| 3       | 生産中 | 生産計画への反映がされて、開発完了をまっている。 |
| 4      | 出荷準備中 | 注文書に含まれている商品の生産が完了して、送り状を作成している状態 |
| 5     | 出荷キャンセル | 工場などの都合で、キャンセルする必要が発生して変更したステータス。 |
| 6     | 出荷済み | 送り状レコードの承認が完了して、配送データ連携が完了して生産物がお客様へ届くのを待っている状態 |
| 7     | 配送済み | 配送業者から完了のデータ連携が取れた状態。キャンセル処理がない限り、支払いサイトを経過を待って入金反映処理が実行される。 |


## 納品書

配送でお届け先へ荷物が届いて、お客様がサインをしてタブレットや各種アプリから、
サインをしてもらって、配送業者からのステータス更新完了した時に
配送業者からのサーバーから、メール及びAPIでデータ連携してCSV等で届く書類データ。

| No | タイトル | 説明 |
|:-----------|:------------|:------------|
| 1       | 担当者確認待ち        | 納品書が届いた状態     |
| 2       | 承認済み       | 納品書について、自社で送り状と照会をしてバッチまたは手動で完了にした状態。     |

## 請求書

荷物が届いて、商品の支払いタイミングに合わせて送付する書類。
本書類の承認をもって、顧客側が支払処理へ反映をする。

| No | タイトル | 説明 |
|:-----------|:------------|:------------|
| 1       | 作成中        | 請求書を作成中     |
| 2       | 承認待ち       | 請求書を依頼者への発行手続き反映処理中    |
| 3       | 発行済み       | 請求書を発行完了した状態    |
| 4       | 入金確認完了       | 支払いが完了して、請求書を一覧から閲覧不要になった状態    |

## 発注書

工場の生産計画内で「不足」となった、部品について、制作依頼先に
製造を依頼する資料。

発注書ステータス一覧。
| No | タイトル | 説明 |
|:-----------|:------------|:------------|
| 1       | 作成中        | 請求書を作成中     |
| 2       | 承認待ち       | 発注先を依頼先への発行手続き反映処理中    |
| 3       | 発行済み       | 発注先を作成完了して、依頼した状態   |
| 4       | 到着待ち       | 発注先で資料を制作先が受領して、部品製造中の状態    |
| 5       | 発注書承認済み       | 支払いが完了して、請求書を一覧から閲覧不要になった状態    |
| 6       | 支払い設定済み       | 発注した内容に承認して、支払い用の書類が総務や経理部へ発注書の内容が転記された状態   |

## 在庫

商品及び商品を構成する部品を工場及び事務所で保持している数。


#### 商品情報

社内での制作及び、製造が完了した場合に完成した状態になる製品。

商品ステータス一覧。

| No | タイトル | 説明 |
|:-----------|:------------|:------------|
| 1       | 作成中        | 商品本体を製造中     |
| 2       | 部品待ち        | 商品内で利用する部品に待ち時間が発生している状態     |
| 3       | 検査待ち        | 商品が完成して、出荷状態を満たしているかの検査を確認状態    |
| 4       | 完成        | 商品確認が取れて、受入用又は在庫に格納した状態   |

## 管理用一覧データ

### 見積用一覧表

着手以降の、見積もり票の一覧が表示されている。
お客様からの結果完了になるまでの準備一覧が表示される。

### 注文一覧書表

生産中及び、送り状を作成して、段ボールからの出荷への反映状態の
注文番号をもった、一覧資料が表示される

### 納品書一覧

お客様のデータ連携が完了しているが、固定担当者の承認が必要か
工場側のCSVデータ連携時刻のずれにより手動反映が必要な一覧表が表示される。

### 請求書一覧表

請求書の作成を総務部が着手してから、入金が確認完了するまでの間
表示される一覧。
支払いサイトの間の、状態管理などで利用される


#### 売掛残高一覧


注文番号で連携した請求書で支払いサイトが存在している状態の資料一覧
が以下のような例がある。

支払い状態

| No | 支払い項目関連名称 | 想定される内容 |
|:-----------|:------------|:------------|
| 1       | クレジットカード        | クレジットカードでの引き落とし前提     |
| 2       | 口座引き落とし       | 請求書を出した先の口座からの引き落とし待ち状態    |


#### 支払い残高一覧表

制作物を受領して、振込用の手続き待ちになっている請求書の一覧が表示される一覧

ステータス一覧

| No | ステータス名称 | 想定される内容 |
|:-----------|:------------|:------------|
| 1       | 支払い待ち        | 制作物を受領して、確認を押した直後     |
| 2       | 支払い完了       | 請求書に対して振込処理が完了した状態    |


#### 部品一覧表

各商品で利用される、部品の情報。
在庫数が０になる場合、ハードウェア関連の場合は商品が製造中になることがある。

パラメータ情報

| No | パラメータ名 | 内容 |
|:-----------|:------------|:------------|
| 1       | 部品番号       | 部品を一意に決める番号 。商品の組み立て用部品一覧で利用する。    |
| 2       | 部品名       | 部品の名称。     |
| 3       | 最低日数       | 発注依頼がかかる最低日数。月単位などの製造予定のシミュレータや計算で利用される。     |
| 4       | 最高日数       | 最も、かかる日数。これ以上かかる場合は、別業者も含めて再調整を実施する。     |
| 5       | 自社製造可能フラグ       | 自社で製造完了するかどうかのフラグ。falseの場合は、発注書作成へとステータスを移行するための処理が実装される   |
| 6       | 発注先会社id一覧       | 製造可能な会社の一覧情報が格納されている。発注書作成時に、依頼先のダイアログ等で利用される。   |

